<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
	
	        (        )   (                  (        )          (
	        )\ )  ( /(   )\ )         *   ) )\ )  ( /(          )\ )
	       (()/(  )\()) (()/(    (  ` )  /((()/(  )\())     (  (()/(
	        /(_))((_)\   /(_))   )\  ( )(_))/(_))((_)\      )\  /(_))
	       (_))    ((_) (_))  _ ((_)(_(_())(_))    ((_)  _ ((_)(_))
	       / __|  / _ \ | |  | | | ||_   _||_ _|  / _ \ | | | |/ __|
	       \__ \ | (_) || |__| |_| |  | |   | |  | (_) || |_| |\__ \
	       |___/  \___/ |____|\___/   |_|  |___|  \___/  \___/ |___/
	
	
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Installing sys-cpu 0.6.0 on OS X 10.5 Leopard -- On Deployment, Performance, and Good Natured Tools</title>
  <meta name="keywords" content="deployment,performance,testing,ec2,amazon,cloud computing,ruby,open source" />
	<meta name="description" content="We build the best deployment and testing tools money can't buy. There's no prohibition on performance!" />
	<meta name="author" content="Solutious Inc" />
	<meta name="verify-v1" content="/DvaKRaHTGuNyQBoIP+UgrFycJ+tPfSzWfQIwuKmqMI=" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link href="/style/screen.css" media="screen" rel="Stylesheet" type="text/css" />
	<link href="/style/print.css" media="print" rel="Stylesheet" type="text/css" />
	<link href="/style/syntax.css" media="screen" rel="Stylesheet" type="text/css" />
	<link href="/blog/atom.rss" rel="alternate" title="The Solutious Blog" type="application/atom+xml" />
  
</head>
<body class="blogPost">

	<div class="corset">
		<div class="top">
			<div class="openSourceProjects">Open Source Projects</div>
			<a class="logo" href="/"><h1>Solutious</h1></a>

			<ul class="productNav">
				<!--li class="ceasars"><a href="#">Ceasars</a></li>
				<li class="drydock"><a href="#">Drydock</a></li-->
				<li class="stella"><a href="#">Stella</a></li>
				<li class="rudy"><a href="#">Rudy</a></li>
			</ul>	
			<div class="navLeftLine"></div>
			<ul class="nav">
				<li class="first"><a href="/">HOME</a></li>
				<li><a href="/">ABOUT</a></li>
				<li><a href="/">PRODUCTS</a></li>
				<li class="on"><a href="/">BLOG</a></li>
				<li><a href="/">CONTACT</a></li>
			</ul>

			<div class="subnav">
				<div class="message">welcome to solutious - we like icecream and yamalows</div>
				<ul>
					<li class="first"><a href="#">the zoo</a></li>
					<li><a href="#">labs</a></li>
					<li><a href="#">miscellany</a></li>
					<li><a href="#">you so and so</a></li>
				</ul>
			</div>	
		</div>


	<div class="left">
	
<div class="entry">

	<div class="info">
		<div class="month">Dec '2008</div>
		<div class="day">30</div>
		<!--div class="commentCount">122</div-->
	</div>

	<a href="/blog/2008/12/30/installing-sys-cpu-osx" title="Installing sys-cpu 0.6.0 on OS X 10.5 Leopard"><h2>Installing sys-cpu 0.6.0 on OS X 10.5 Leopard</h2></a>
	<p class="author">posted by delano</p>
	
	

<p class="author">posted by delano on Tue, Dec 30 2008</p>

<!--
<script>
var idcomments_acct = 'defcf13babbc8ef58be95d5511a3b1a1';
var idcomments_post_id;
var idcomments_post_url;
</script>
<script type="text/javascript" src="http://www.intensedebate.com/js/genericLinkWrapperV2.js"></script>
-->

<p>I was trying to install the
<a href="http://rubyforge.org/projects/sysutils" title="sysutils at Rubyforge">sys-utils</a> Ruby libraries today and got an error while building sys-cpu on OX 10.5 Leopard. sys-cpu is a multi-platform Ruby library for accessing information about the CPUs and it contains a native extension which needs to be compiled during them installation. This is the error:</p>

<pre><code>$ sudo gem install sys-cpu
  Building native extensions.  This could take a while...
  ERROR:  Error installing sys-cpu:
  ERROR: Failed to build gem native extension.
  ...
  cpu.c:14:17: error: kvm.h: No such file or directory
  cpu.c:14:17: error: kvm.h: No such file or directory
  cpu.c: In function 'cpu_load_avg':
  ...
  make: *** [cpu.o] Error 1
</code></pre>

<p>OS X 10.5 seems to be missing a C header file, kvm.h, that's required by sys-cpu. Here's how you can solve the problem:</p>

<ul>
<li>Download a <a href="http://rubyforge.org/frs/download.php/20065/sys-cpu-0.6.0.tar.gz" title="sys-cpu tar.gz">non-gem version</a> and unpack it.</li>
<li>Get a copy of kvm.h. If you're running OS X 10.5 that was upgraded from 10.4, you can find it in <code>/Developer/SDKs/MacOSX10.4.sdk/usr/include</code>. If not, you can download it from here: <a href="http://solutious.com/r/kvm.h">http://solutious.com/r/kvm.h</a>.</li>
<li>Copy kvm.h in to sys-cpu-0.6.0/ext</li>
<li>Inside of sys-cpu-0.6.0, run: <code>rake test</code> then <code>sudo rake install</code></li>
<li>The following command should now run without errors: <code>ruby -r'sys/cpu' -e 1</code>.</li>
</ul>


<p>That's it!</p>


<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><span>Apr 22 2009</span> &raquo; <a href="/blog/2009/04/22/rudy-ec2-api-tools-replacement">Rudy, A Replacement for EC2 API Tools.</a></li>
    
      <li><span>Dec 12 2008</span> &raquo; <a href="/blog/2008/12/12/tumblr-to-wordpress">From Tumblr to WordPress</a></li>
    
      <li><span>Apr 30 2009</span> &raquo; <a href="/blog/2009/04/30/its-an-outrake">It's an outrake!</a></li>
    
  </ul>
</div>

<script>
var idcomments_acct = 'defcf13babbc8ef58be95d5511a3b1a1';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript'
src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>


</div>
	</div>
	
	<div class="aboutSolutious">
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam a mauris. Aenean fringilla, leo non ornare condimentum, tellus leo condimentum arcu, ac commodo tortor augue at justo. Praesent vehicula. Nam tellus. Proin in erat quis augue elementum ullamcorper. Phasellus sodales egestas augue. Sed odio dolor, aliquet ac, pellentesque sit amet, eleifend non, risus. Fusce ornare nunc eget leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</p>
			<p class="signature">- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Solutious</p>
	</div>

	<a class="aboutAuthor" href="#"></a>
	<div class="reset"></div>

	<div id="footer">
		<a href="http://solutious.com/" class="big">Solutious</a>.
		<span class="tagline">There's no prohibition on performance.</span>
		Copyright 2006-2009.
	</div>
	
</div>
 	
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4642735-3");
pageTracker._trackPageview();
</script>


</body>
</html>

