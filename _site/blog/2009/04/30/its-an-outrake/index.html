<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
	
	        (        )   (                  (        )          (
	        )\ )  ( /(   )\ )         *   ) )\ )  ( /(          )\ )
	       (()/(  )\()) (()/(    (  ` )  /((()/(  )\())     (  (()/(
	        /(_))((_)\   /(_))   )\  ( )(_))/(_))((_)\      )\  /(_))
	       (_))    ((_) (_))  _ ((_)(_(_())(_))    ((_)  _ ((_)(_))
	       / __|  / _ \ | |  | | | ||_   _||_ _|  / _ \ | | | |/ __|
	       \__ \ | (_) || |__| |_| |  | |   | |  | (_) || |_| |\__ \
	       |___/  \___/ |____|\___/   |_|  |___|  \___/  \___/ |___/
	
	
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Solutious, The Performance Company.</title>
  <meta name="keywords" content="deployment,performance,testing,ec2,amazon,cloud computing,ruby,open source" />
	<meta name="description" content="We build the best deployment and testing tools money can't buy. There's no prohibition on performance!" />
	<meta name="author" content="Solutious Inc" />
	<meta name="verify-v1" content="/DvaKRaHTGuNyQBoIP+UgrFycJ+tPfSzWfQIwuKmqMI=" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link href="/style/screen.css" media="screen" rel="Stylesheet" type="text/css" />
	<link href="/style/print.css" media="print" rel="Stylesheet" type="text/css" />
	<script src="/script/sifr.js" type="text/javascript"></script>
	<script src="/script/script.js" type="text/javascript"></script>	
</head>
<body class="blog">

	<div class="corset">
		<div class="top">
			<div class="openSourceProjects">Open Source Projects</div>
			<a class="logo" href="/"><h1>Solutious</h1></a>

			<ul class="productNav">
				<!--li class="ceasars"><a href="#">Ceasars</a></li>
				<li class="drydock"><a href="#">Drydock</a></li-->
				<li class="stella"><a href="/stella">Stella</a></li>
				<li class="rudy"><a href="/rudy">Rudy</a></li>
			</ul>
			
			<ul class="navLeftLine"><li>&nbsp;</li></ul>
			<ul class="nav">
				<li class="navHome first"><a href="/">HOME</a></li>
				<li class="navAbout"><a href="/">ABOUT</a></li>
				<!--li class="navProducts"><a href="/products">PRODUCTS</a></li-->
				<li class="navBlog"><a href="/blog">BLOG</a></li>
				<!--li class="navContact"><a href="/">CONTACT</a></li-->
			</ul>

			<div class="subnav">
				<div class="message">welcome to solutious - we like icecream and yamalows</div>
				<ul>
					<li class="navArchive first"><a href="archive">archives</a></li>
				</ul>
			</div>	
		</div>


	<div class="left">
	
<div class="entry">

	<div class="info">
		<div class="month">Apr '09</div>
		<div class="day">30</div>
		<!--div class="commentCount">122</div-->
	</div>

	<a href="/blog/2009/04/30/its-an-outrake" title="It's an outrake!"><h2>It's an outrake!</h2></a>
	<p class="author">posted by </p>

<!--
<script>
var idcomments_acct = 'defcf13babbc8ef58be95d5511a3b1a1';
var idcomments_post_id;
var idcomments_post_url;
</script>
<script type="text/javascript" src="http://www.intensedebate.com/js/genericLinkWrapperV2.js"></script>
-->

<p>This is a story about Ruby mixins, Rake, and hell. After releasing <a href="http://github.com/solutious/rudy" title="Rudy: not your grandparents' deployment tool">Rudy</a> 0.6 last week, I started immediately on 0.7. This next version has a rebuilt DSL for the routines configuration, including a new syntax for running shell commands. The new syntax makes it possible to specify shell commands like methods. You can probably see where this is heading. First, a comparison of the old and new syntax:</p>

<p><strong>Old, 0.6 syntax</strong>
Liquid error: No such file or directory - pygmentize -f html -l ruby</p>

<p><strong>New, 0.7 syntax</strong>
Liquid error: No such file or directory - pygmentize -f html -l ruby</p>

<p>There are several advantages to using the new syntax which I'll cover in a future post. Right now, I'll cut to the hellish chase.</p>

<p>Both DSLs produce a configuration hash. Nothing else should happen when they're parsed. And nothing else did happen until I tried running the tests with rake. The old syntax was fine, but I was getting some strange errors with the new syntax. Stuff like</p>

<pre><code>Error in test/10_config/30_machines_test.rb: can't convert Fixnum into String
/usr/local/lib/ruby/1.9.1/fileutils.rb:1386:in `path'
</code></pre>

<p>FileUtils? That's weird, I don't use FileUtils. Or do I?</p>

<p><code>rake-0.8.4/lib/rake.rb</code> includes <a href="http://www.ruby-doc.org/core/classes/FileUtils.html">FileUtils</a> into the RakeFileUtils module and later includes RakeFileUtils <em>into the global namespace</em>. My criminy!</p>

<p><strong>Offensive ruby code</strong>
Liquid error: No such file or directory - pygmentize -f html -l ruby</p>

<p>That means when I'm running rake the following methods are accessible from everywhere: <code>cd</code>, <code>mkdir</code>, <code>touch</code>, <code>rm</code>, ...! The <code>mkdir</code> in the DSL was <em>being executed as it was parsed</em>. That's insane. Thank the Great Scott I wasn't testing <code>rm</code>.</p>


<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><span>Apr 21 2009</span> &raquo; <a href="/blog/2009/04/21/rudy-not-your-grandparents-deployment-tool">Rudy, not your grandparent's deployment tool</a></li>
    
      <li><span>Apr 22 2009</span> &raquo; <a href="/blog/2009/04/22/rudy-ec2-api-tools-replacement">Rudy, A Replacement for EC2 API Tools.</a></li>
    
      <li><span>Sep 23 2008</span> &raquo; <a href="/blog/2008/09/23/ec2-disk-performance-linux-solaris">EC2 Disk Performance, Linux vs OpenSolaris - Preliminary Results</a></li>
    
  </ul>
</div>

<script>
var idcomments_acct = 'defcf13babbc8ef58be95d5511a3b1a1';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript'
src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>


</div>
	</div>
	
	<div class="aboutSolutious">
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam a mauris. Aenean fringilla, leo non ornare condimentum, tellus leo condimentum arcu, ac commodo tortor augue at justo. Praesent vehicula. Nam tellus. Proin in erat quis augue elementum ullamcorper. Phasellus sodales egestas augue. Sed odio dolor, aliquet ac, pellentesque sit amet, eleifend non, risus. Fusce ornare nunc eget leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</p>
			<p class="signature">- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Solutious</p>
	</div>

	<div class="aboutDelano">
		<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam a mauris. Aenean fringilla, leo non ornare condimentum, tellus leo condimentum arcu, ac commodo tortor augue at justo. Praesent vehicula. Nam tellus. Proin in erat quis augue elementum ullamcorper. Phasellus sodales egestas augue. Sed odio dolor, aliquet ac, pellentesque sit amet, eleifend non, risus. Fusce ornare nunc eget leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</p>
		<p class="signature">- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Delano Mandelbaum</p>
	</div>
	<div class="reset"></div>

	<div id="footer">
		<a href="http://solutious.com/" class="big">Solutious</a>.
		<span class="tagline">There's no prohibition on performance.</span>
		Copyright 2006-2009.
	</div>
	
</div>
 	
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4642735-3");
pageTracker._trackPageview();
</script>


</body>
</html>

