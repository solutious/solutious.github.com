<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
	
	        (        )   (                  (        )          (
	        )\ )  ( /(   )\ )         *   ) )\ )  ( /(          )\ )
	       (()/(  )\()) (()/(    (  ` )  /((()/(  )\())     (  (()/(
	        /(_))((_)\   /(_))   )\  ( )(_))/(_))((_)\      )\  /(_))
	       (_))    ((_) (_))  _ ((_)(_(_())(_))    ((_)  _ ((_)(_))
	       / __|  / _ \ | |  | | | ||_   _||_ _|  / _ \ | | | |/ __|
	       \__ \ | (_) || |__| |_| |  | |   | |  | (_) || |_| |\__ \
	       |___/  \___/ |____|\___/   |_|  |___|  \___/  \___/ |___/
	
	
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>EC2 Disk Performance, Linux vs OpenSolaris - Preliminary Results -- On Deployment, Performance, and Good Natured Tools</title>
  <meta name="keywords" content="deployment,performance,testing,ec2,amazon,cloud computing,ruby,open source" />
	<meta name="description" content="We build the best deployment and testing tools money can't buy. There's no prohibition on performance!" />
	<meta name="author" content="Solutious Inc" />
	<meta name="verify-v1" content="/DvaKRaHTGuNyQBoIP+UgrFycJ+tPfSzWfQIwuKmqMI=" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link href="/style/screen.css" media="screen" rel="Stylesheet" type="text/css" />
	<link href="/style/print.css" media="print" rel="Stylesheet" type="text/css" />
	<link href="/style/syntax.css" media="screen" rel="Stylesheet" type="text/css" />
	<link href="/blog/atom.rss" rel="alternate" title="The Solutious Blog" type="application/atom+xml" />
  
</head>
<body id="blogPost">

<div id="top">
	<div class="corset">
		<h1 class="logo"><a href="/">Solutious</a></h1>
		<ul class="nav">
			<li class="first"><a href="/about/">about</a></li>
			<li id="navBlog"><a href="/blog/">blog</a></li>
			<li id="navArchive"><a href="/blog/archive/">archive</a></li>
		</ul>
	</div>
</div>



<div class="corset">

<a name="/blog/2008/09/23/ec2-disk-performance-linux-solaris"></a>
<h2><a href="/blog/2008/09/23/ec2-disk-performance-linux-solaris" title="EC2 Disk Performance, Linux vs OpenSolaris - Preliminary Results">EC2 Disk Performance, Linux vs OpenSolaris - Preliminary Results</a></h2>

<p class="author">posted by delano on Tue, Sep 23 2008</p>

<!--
<script>
var idcomments_acct = 'defcf13babbc8ef58be95d5511a3b1a1';
var idcomments_post_id;
var idcomments_post_url;
</script>
<script type="text/javascript" src="http://www.intensedebate.com/js/genericLinkWrapperV2.js"></script>
-->

<p>I started playing with the Solaris images on EC2 last week. I&#8217;m crazy for disk performance so I got straight to the benchmarking. These are only preliminary results because I&#8217;m only testing reading and writing medium to large files and I&#8217;m still getting a feel for the performance. In these tests I&#8217;m using the dd utility to read and write files to several mounts (local, local swap, and EBS). The test and results are below and I follow up with what will be improved on for the next test. NOTE: I&#8217;m currently waiting for a response from Sun&#8217;s EC2 support before continuing the tests.</p>

<p>Summary: Reading and writing medium to large files in OpenSolaris in EC2 appears to be slower than Linux. More testing is required.</p>

<h2 id='tests'>Tests</h2>

<ul>
<li>
<p>Read/write 10MB, 100MB, 1000MB to /, /mnt/, /data, /tmp</p>

<ul>
<li>/ and /mnt are the default &#8220;local&#8221; disks</li>

<li>/tmp is the default &#8220;local&#8221; swap space - /data is an EBS volume (ext3 for linux, zfs for solaris)</li>

<li>See script <a href='http://solutious.com/benchmarks/disktest1-sept.17.2008/disktest1.sh.txt'>disktest1.sh</a></li>
</ul>
</li>
</ul>

<h2 id='machines'>Machines</h2>

<ul>
<li>
<p>m1.small, Fedora 8 Linux 32-bit (<a href='http://solutious.com/benchmarks/disktest1-sept.17.2008/disktest1-linux-small.log'>test data</a>)</p>
</li>

<li>
<p>m1.small, OpenSolaris 2008.05 32-bit (no test data, killed after 20 minutes)</p>
</li>

<li>
<p>m1.large, Fedora 8 Linux 64-bit (<a href='http://solutious.com/benchmarks/disktest1-sept.17.2008/disktest1-linux-large.log'>test data</a>)</p>
</li>

<li>
<p>m1.large, Solaris Express Community Edition build 79 64-bit (<a href='http://solutious.com/benchmarks/disktest1-sept.17.2008/disktest1-solaris-large.log'>test data</a>)</p>

<h2 id='conclusions'>Conclusions</h2>
</li>

<li>
<p>Local Disk performance: Linux is much faster. - Linux vs OpenSolaris - OpenSolaris can be up to 30 times slower for 1GB+ files (2s vs 1m) - About the same for 10MB and 100MB files (~0.02s) - OpenSolaris swap (/tmp) performance is about 2x slower (2s vs 4s for 1GB) - Small Linux vs Large Linux - Comparable for 10MB files - m1.small is amall is about 3x slower for 100MB files (0.6s vs 0.2s) - m1.small is amall is about 5-8x slower for 1000MB files (12s vs 2s) - Small OpenSolaris vs Large OpenSolaris - The m1.small instance of OpenSolaris is really, really slow for all tests. I stopped the test after 20 minutes (note the m1.large OpenSolaris instance took 6.5 minutes)</p>
</li>

<li>
<p>EBS Performance: Linux is faster. - Linux vs OpenSolaris - Solaris performance is about 2.5x slower (2s vs 5s for 1GB) - Small Linux vs Large Linux - m1.small is about 2x slower for 10MB (0.05s vs 0.025s) - m1.small is about 2-3x slower for 100MB (0.6s vs 0.2s) - m1.small is about 7x slower for 1GB (14s vs 2s) - Small Solaris vs Large Solaris - m1.small is REALLY slow.</p>

<h2 id='notes'>Notes</h2>
</li>

<li>
<p>The times grew longer for each of the 3 runs (the first run was always the fastest). Try again with a delay in between to account for some kind of background EC2/EBS process to finish.</p>
</li>

<li>
<p>There are occasional writes which are very slow for both platforms regardless of which test was being run.</p>
</li>

<li>
<p>The Solaris Express Community Edition is not supported.</p>
</li>
</ul>

<h2 id='what_you_can_look_forward_to_in_the_next_test'>What you can look forward to in the next test</h2>

<ul>
<li>Use standard public EC2 images. Include the ami ID and uname output for each test to be clear in the systems used.</li>

<li>Track the total run time for all tests (note: above I only have times for the two large instances).</li>

<li>Use bonnie-64 test to test caching / swapping performance.</li>

<li>Use bonnie++ for testing small file performance.</li>

<li>Restart instances between tests, define warm-up procedure.</li>
</ul>

<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><span>Apr 21 2009</span> &raquo; <a href="/blog/2009/04/21/rudy-not-your-grandparents-deployment-tool">Rudy, not your grandparent's deployment tool</a></li>
    
      <li><span>Dec 10 2008</span> &raquo; <a href="/blog/2008/12/10/using-amazon-ec2-in-europe">Using Amazon EC2 In Europe</a></li>
    
      <li><span>Apr 22 2009</span> &raquo; <a href="/blog/2009/04/22/rudy-ec2-api-tools-replacement">Rudy, A Replacement for EC2 API Tools.</a></li>
    
  </ul>
</div>

<script>
var idcomments_acct = 'defcf13babbc8ef58be95d5511a3b1a1';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript'
src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>


</div>
  

<div id="footer" class="corset">
	<a href="http://solutious.com/" class="big">Solutious</a>.
	<span class="tagline">There's no prohibition on performance.</span>
	Copyright 2006-2009.
</div>
 	
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4642735-3");
pageTracker._trackPageview();
</script>


</body>
</html>

