<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
	
	        (        )   (                  (        )          (
	        )\ )  ( /(   )\ )         *   ) )\ )  ( /(          )\ )
	       (()/(  )\()) (()/(    (  ` )  /((()/(  )\())     (  (()/(
	        /(_))((_)\   /(_))   )\  ( )(_))/(_))((_)\      )\  /(_))
	       (_))    ((_) (_))  _ ((_)(_(_())(_))    ((_)  _ ((_)(_))
	       / __|  / _ \ | |  | | | ||_   _||_ _|  / _ \ | | | |/ __|
	       \__ \ | (_) || |__| |_| |  | |   | |  | (_) || |_| |\__ \
	       |___/  \___/ |____|\___/   |_|  |___|  \___/  \___/ |___/
	
	
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Solutious, The Performance Company.</title>
  <meta name="keywords" content="deployment,performance,testing,ec2,amazon,cloud computing,ruby,open source" />
	<meta name="description" content="We build the best deployment and testing tools money can't buy. There's no prohibition on performance!" />
	<meta name="author" content="Solutious Inc" />
	<meta name="verify-v1" content="/DvaKRaHTGuNyQBoIP+UgrFycJ+tPfSzWfQIwuKmqMI=" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link href="/style/screen.css" media="screen" rel="Stylesheet" type="text/css" />
	<link href="/style/print.css" media="print" rel="Stylesheet" type="text/css" />
	<script src="/script/sifr.js" type="text/javascript"></script>
	<script src="/script/script.js" type="text/javascript"></script>	
</head>
<body class="blog">

	<div class="corset">
		<div class="top">
			<div class="openSourceProjects">Open Source Projects</div>
			<a class="logo" href="/"><h1>Solutious</h1></a>

			<ul class="productNav">
				<!--li class="ceasars"><a href="#">Ceasars</a></li>
				<li class="drydock"><a href="#">Drydock</a></li-->
				<li class="stella"><a href="/products/stella">Stella</a></li>
				<li class="rudy"><a href="/products/rudy">Rudy</a></li>
			</ul>
			
			<ul class="navLeftLine"><li>&nbsp;</li></ul>
			<ul class="nav">
				<li class="navHome first"><span><a href="/">HOME</a></span></li>
				<li class="navAbout"><span><a href="/about">ABOUT</a></span></li>
				<!--li class="navProducts"><span><a href="/products">PRODUCTS</a></span></li-->
				<li class="navBlog"><span><a href="/blog">BLOG</a></span></li>
				<!--li class="navContact"><span><a href="/">CONTACT</a></span></li-->
			</ul>

			<div class="subnav">
				<div class="message">welcome to solutious - we like icecream and yamalows</div>
				<ul>
					<li class="navArchive first"><a href="archive">archives</a></li>
				</ul>
			</div>	
		</div>


	<div class="left">
	
<div class="entry">

	<div class="info">
		<div class="month">Sep '08</div>
		<div class="day">23</div>
		<!--div class="commentCount">122</div-->
	</div>

	<a href="/blog/2008/09/23/ec2-disk-performance-linux-solaris" title="EC2 Disk Performance, Linux vs OpenSolaris - Preliminary Results"><h2>EC2 Disk Performance, Linux vs OpenSolaris - Preliminary Results</h2></a>
	<p class="author">posted by </p>

<!--
<script>
var idcomments_acct = 'defcf13babbc8ef58be95d5511a3b1a1';
var idcomments_post_id;
var idcomments_post_url;
</script>
<script type="text/javascript" src="http://www.intensedebate.com/js/genericLinkWrapperV2.js"></script>
-->

<p>I started playing with the Solaris images on EC2 last week. I'm crazy for disk performance so I got straight to the benchmarking. These are only preliminary results because I'm only testing reading and writing medium to large files and I'm still getting a feel for the performance. In these tests I'm using the dd utility to read and write files to several mounts (local, local swap, and EBS). The test and results are below and I follow up with what will be improved on for the next test. NOTE: I'm currently waiting for a response from Sun's EC2 support before continuing the tests.</p>

<p>Summary: Reading and writing medium to large files in OpenSolaris in EC2 appears to be slower than Linux. More testing is required.</p>

<h2>Tests</h2>

<ul>
<li>Read/write 10MB, 100MB, 1000MB to /, /mnt/, /data, /tmp

<ul>
<li>/ and /mnt are the default "local" disks</li>
<li>/tmp is the default "local" swap space</li>
<li>/data is an EBS volume (ext3 for linux, zfs for solaris)</li>
<li>See script <a href="http://solutious.com/benchmarks/disktest1-sept.17.2008/disktest1.sh.txt">disktest1.sh</a></li>
</ul>
</li>
</ul>


<h2>Machines</h2>

<ul>
<li>m1.small, Fedora 8 Linux 32-bit (<a href="http://solutious.com/benchmarks/disktest1-sept.17.2008/disktest1-linux-small.log">test data</a>)</li>
<li>m1.small, OpenSolaris 2008.05 32-bit (no test data, killed after 20 minutes)</li>
<li>m1.large, Fedora 8 Linux 64-bit (<a href="http://solutious.com/benchmarks/disktest1-sept.17.2008/disktest1-linux-large.log">test data</a>)</li>
<li>m1.large, Solaris Express Community Edition build 79 64-bit (<a href="http://solutious.com/benchmarks/disktest1-sept.17.2008/disktest1-solaris-large.log">test data</a>)</li>
</ul>


<h2>Conclusions</h2>

<ul>
<li><p>Local Disk performance: Linux is much faster.</p>

<ul>
<li>Linux vs OpenSolaris

<ul>
<li>OpenSolaris can be up to 30 times slower for 1GB+ files (2s vs 1m)</li>
<li>About the same for 10MB and 100MB files (~0.02s)</li>
<li>OpenSolaris swap (/tmp) performance is about 2x slower (2s vs 4s for 1GB)</li>
</ul>
</li>
<li>Small Linux vs Large Linux

<ul>
<li>Comparable for 10MB files</li>
<li>m1.small is amall is about 3x slower for 100MB files (0.6s vs 0.2s)</li>
<li>m1.small is amall is about 5-8x slower for 1000MB files (12s vs 2s)</li>
</ul>
</li>
<li>Small OpenSolaris vs Large OpenSolaris

<ul>
<li>The m1.small instance of OpenSolaris is really, really slow for all tests. I stopped the test after 20 minutes (note the m1.large OpenSolaris instance took 6.5 minutes)</li>
</ul>
</li>
</ul>
</li>
<li><p>EBS Performance: Linux is faster.</p>

<ul>
<li>Linux vs OpenSolaris

<ul>
<li>Solaris performance is about 2.5x slower (2s vs 5s for 1GB)</li>
</ul>
</li>
<li>Small Linux vs Large Linux

<ul>
<li>m1.small is about 2x slower for 10MB (0.05s vs 0.025s)</li>
<li>m1.small is about 2-3x slower for 100MB (0.6s vs 0.2s)</li>
<li>m1.small is about 7x slower for 1GB (14s vs 2s)</li>
</ul>
</li>
<li>Small Solaris vs Large Solaris

<ul>
<li>m1.small is REALLY slow.</li>
</ul>
</li>
</ul>
</li>
</ul>


<h2>Notes</h2>

<ul>
<li>The times grew longer for each of the 3 runs (the first run was always the fastest). Try again with a delay in between to account for some kind of background EC2/EBS process to finish.</li>
<li>There are occasional writes which are very slow for both platforms regardless of which test was being run.</li>
<li>The Solaris Express Community Edition is not supported.</li>
</ul>


<h2>What you can look forward to in the next test</h2>

<ul>
<li>Use standard public EC2 images. Include the ami ID and uname output for each test to be clear in the systems used.</li>
<li>Track the total run time for all tests (note: above I only have times for the two large instances).</li>
<li>Use bonnie-64 test to test caching / swapping performance.</li>
<li>Use bonnie++ for testing small file performance.</li>
<li>Restart instances between tests, define warm-up procedure.</li>
</ul>



<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><span>Apr 21 2009</span> &raquo; <a href="/blog/2009/04/21/rudy-not-your-grandparents-deployment-tool">Rudy, not your grandparent's deployment tool</a></li>
    
      <li><span>Dec 10 2008</span> &raquo; <a href="/blog/2008/12/10/using-amazon-ec2-in-europe">Using Amazon EC2 In Europe</a></li>
    
      <li><span>Apr 22 2009</span> &raquo; <a href="/blog/2009/04/22/rudy-ec2-api-tools-replacement">Rudy, A Replacement for EC2 API Tools.</a></li>
    
  </ul>
</div>

<script>
var idcomments_acct = 'defcf13babbc8ef58be95d5511a3b1a1';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript'
src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>


</div>
	</div>
	
	<!--div class="aboutSolutious">
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam a mauris. Aenean fringilla, leo non ornare condimentum, tellus leo condimentum arcu, ac commodo tortor augue at justo. Praesent vehicula. Nam tellus. Proin in erat quis augue elementum ullamcorper. Phasellus sodales egestas augue. Sed odio dolor, aliquet ac, pellentesque sit amet, eleifend non, risus. Fusce ornare nunc eget leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</p>
			<p class="signature">- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Solutious</p>
	</div>

	<div class="aboutDelano">
		<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam a mauris. Aenean fringilla, leo non ornare condimentum, tellus leo condimentum arcu, ac commodo tortor augue at justo. Praesent vehicula. Nam tellus. Proin in erat quis augue elementum ullamcorper. Phasellus sodales egestas augue. Sed odio dolor, aliquet ac, pellentesque sit amet, eleifend non, risus. Fusce ornare nunc eget leo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</p>
		<p class="signature">- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Delano Mandelbaum</p>
	</div-->
	<div class="reset"></div>

	<div id="footer">
		<a href="http://solutious.com/" class="big">Solutious</a>.
		<span class="tagline">There's no prohibition on performance.</span>
		Copyright 2006-2009.
	</div>
	
</div>
 	
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4642735-3");
pageTracker._trackPageview();
</script>


</body>
</html>

